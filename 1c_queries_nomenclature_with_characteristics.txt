============================================
ЗАПРОС 1: Получить все комбинации номенклатура + характеристика
============================================
Этот запрос возвращает все комбинации:
- Номенклатуры с характеристиками (каждая комбинация = отдельная строка)
- Номенклатуры без характеристик (одна строка на номенклатуру)
============================================

ВЫБРАТЬ
	Номенклатура.Ссылка КАК СсылкаНоменклатуры,
	Номенклатура.Код КАК КодНоменклатуры,
	Номенклатура.Наименование КАК НаименованиеНоменклатуры,
	ХарактеристикиНоменклатуры.Ссылка КАК СсылкаХарактеристики,
	ХарактеристикиНоменклатуры.НаименованиеПолное КАК НаименованиеХарактеристики
ИЗ
	Справочник.Номенклатура КАК Номенклатура
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО ХарактеристикиНоменклатуры.Владелец = Номенклатура.Ссылка
ГДЕ
	НЕ Номенклатура.ПометкаУдаления
	И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	Номенклатура.Ссылка КАК СсылкаНоменклатуры,
	Номенклатура.Код КАК КодНоменклатуры,
	Номенклатура.Наименование КАК НаименованиеНоменклатуры,
	ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка) КАК СсылкаХарактеристики,
	ВЫРАЗИТЬ(NULL КАК СТРОКА(1)) КАК НаименованиеХарактеристики
ИЗ
	Справочник.Номенклатура КАК Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО ХарактеристикиНоменклатуры.Владелец = Номенклатура.Ссылка
			И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления
ГДЕ
	НЕ Номенклатура.ПометкаУдаления
	И ХарактеристикиНоменклатуры.Ссылка ЕСТЬ NULL

УПОРЯДОЧИТЬ ПО
	НаименованиеНоменклатуры,
	НаименованиеХарактеристики


============================================
ЗАПРОС 2: Подсчет общего количества комбинаций
============================================
Показывает:
- Общее количество комбинаций номенклатура+характеристика
- Количество номенклатур с характеристиками
- Количество номенклатур без характеристик
============================================

ВЫБРАТЬ
	КОЛИЧЕСТВО(*) КАК ВсегоКомбинаций,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ СсылкаНоменклатуры) КАК ВсегоНоменклатур,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ СсылкаХарактеристики) КАК ВсегоХарактеристик
ИЗ
	(
		ВЫБРАТЬ
			Номенклатура.Ссылка КАК СсылкаНоменклатуры,
			ХарактеристикиНоменклатуры.Ссылка КАК СсылкаХарактеристики
		ИЗ
			Справочник.Номенклатура КАК Номенклатура
				ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
				ПО ХарактеристикиНоменклатуры.Владелец = Номенклатура.Ссылка
		ГДЕ
			НЕ Номенклатура.ПометкаУдаления
			И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления

		ОБЪЕДИНИТЬ ВСЕ

		ВЫБРАТЬ
			Номенклатура.Ссылка КАК СсылкаНоменклатуры,
			ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка) КАК СсылкаХарактеристики
		ИЗ
			Справочник.Номенклатура КАК Номенклатура
				ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
				ПО ХарактеристикиНоменклатуры.Владелец = Номенклатура.Ссылка
					И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления
		ГДЕ
			НЕ Номенклатура.ПометкаУдаления
			И ХарактеристикиНоменклатуры.Ссылка ЕСТЬ NULL
	) КАК Комбинации


============================================
ЗАПРОС 3: Детальная статистика по номенклатуре
============================================
Показывает для каждой номенклатуры:
- Количество характеристик
- Есть ли характеристики вообще
============================================

ВЫБРАТЬ
	Номенклатура.Ссылка КАК Номенклатура,
	Номенклатура.Код КАК Код,
	Номенклатура.Наименование КАК Наименование,
	КОЛИЧЕСТВО(ХарактеристикиНоменклатуры.Ссылка) КАК КоличествоХарактеристик,
	ВЫБОР
		КОГДА КОЛИЧЕСТВО(ХарактеристикиНоменклатуры.Ссылка) > 0
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ЕстьХарактеристики
ИЗ
	Справочник.Номенклатура КАК Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО ХарактеристикиНоменклатуры.Владелец = Номенклатура.Ссылка
			И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления
ГДЕ
	НЕ Номенклатура.ПометкаУдаления

СГРУППИРОВАТЬ ПО
	Номенклатура.Ссылка,
	Номенклатура.Код,
	Номенклатура.Наименование

УПОРЯДОЧИТЬ ПО
	КоличествоХарактеристик УБЫВ,
	Наименование


============================================
ЗАПРОС 4: Топ номенклатур с наибольшим количеством характеристик
============================================
Показывает топ-20 номенклатур с наибольшим количеством характеристик
============================================

ВЫБРАТЬ ПЕРВЫЕ 20
	Номенклатура.Ссылка КАК Номенклатура,
	Номенклатура.Код КАК Код,
	Номенклатура.Наименование КАК Наименование,
	КОЛИЧЕСТВО(ХарактеристикиНоменклатуры.Ссылка) КАК КоличествоХарактеристик
ИЗ
	Справочник.Номенклатура КАК Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО ХарактеристикиНоменклатуры.Владелец = Номенклатура.Ссылка
			И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления
ГДЕ
	НЕ Номенклатура.ПометкаУдаления

СГРУППИРОВАТЬ ПО
	Номенклатура.Ссылка,
	Номенклатура.Код,
	Номенклатура.Наименование

УПОРЯДОЧИТЬ ПО
	КоличествоХарактеристик УБЫВ
