# Обработка 1С для выгрузки данных

Эта папка содержит исходный код внешней обработки 1С для выгрузки данных в сервис нормализации и анализа.

## Структура

```
1c_processing/
├── Module/
│   └── Module.bsl          # Модуль обработки (основной код)
├── Forms/
│   └── Form1/              # Форма обработки
│       └── (файлы формы)
├── compile_epf.ps1         # Скрипт компиляции (PowerShell)
├── compile_epf.bat         # Скрипт компиляции (Batch)
└── README.md               # Этот файл
```

## Компиляция в .epf

### Способ 1: Через Конфигуратор 1С (рекомендуется)

1. Откройте **Конфигуратор 1С**
2. Создайте новую **внешнюю обработку**:
   - Файл → Новый → Внешняя обработка
3. Скопируйте код модуля:
   - Откройте модуль обработки
   - Скопируйте содержимое из `Module/Module.bsl`
   - Вставьте в модуль обработки
4. Настройте форму согласно инструкции:
   - См. `../1c_form_instructions.md`
5. Сохраните обработку как `.epf`:
   - Файл → Сохранить как → выберите формат `.epf`

### Способ 2: Через скрипт (требует настройки)

#### PowerShell (Windows)

```powershell
.\compile_epf.ps1 -PathTo1C "C:\Program Files\1cv8\8.3.25.1234\bin\1cv8.exe"
```

#### Batch (Windows)

```batch
set PATH_TO_1C=C:\Program Files\1cv8\8.3.25.1234\bin\1cv8.exe
.\compile_epf.bat
```

**Примечание:** Автоматическая компиляция через командную строку требует дополнительной настройки и может не работать во всех версиях 1С.

## Использование

1. Откройте обработку в 1С:Предприятие
2. Заполните настройки:
   - **АдресСервера**: адрес HTTP сервера (по умолчанию: `http://localhost:9999`)
   - **ИдентификаторБазыДанных**: UUID базы данных на сервере (опционально)
   - **РазмерПакета**: количество элементов в одном пакете (по умолчанию: 50)
3. Нажмите кнопку **"Выполнить выгрузку"**

## Документация

- Инструкция по настройке формы: `../1c_form_instructions.md`
- Описание функций: `../1c_module_extensions.bsl`
- Интеграционное руководство: `../1c_integration_guide.md`

## Требования

- 1С:Предприятие 8.3 или выше
- Доступ к HTTP серверу для выгрузки данных
- Управляемые формы (для работы с прогрессом)

## Поддержка

При возникновении проблем:
1. Проверьте настройки подключения к серверу
2. Убедитесь, что сервер доступен по указанному адресу
3. Проверьте логи в окне сообщений 1С




