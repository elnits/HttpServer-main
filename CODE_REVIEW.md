# –ö–æ–¥-—Ä–µ–≤—å—é –ø—Ä–æ–µ–∫—Ç–∞ HttpServer

**–î–∞—Ç–∞:** 2025-01-27  
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** –¢–µ–∫—É—â–∞—è  
**–Ø–∑—ã–∫–∏:** Go (Backend), TypeScript/Next.js (Frontend)

---

## –†–µ–∑—é–º–µ

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π HTTP —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ 1–°, –≤–∫–ª—é—á–∞—é—â–∏–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI. –ö–æ–¥–æ–≤–∞—è –±–∞–∑–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞, –Ω–æ –∏–º–µ–µ—Ç —Ä—è–¥ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤ –≤ –æ–±–ª–∞—Å—Ç–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞.

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∑–∞–∫—Ä—ã—Ç–æ–º –∫–æ–Ω—Ç—É—Ä–µ, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, CORS, rate limiting) –Ω–µ —è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º–∏ –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω—ã.

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º:**
- üî¥ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ** - —Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- üü° **–í–∞–∂–Ω—ã–µ** - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è
- üü¢ **–ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ** - —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

---

## 1. –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ ‚ö™ (–ù–µ–∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞)

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∑–∞–∫—Ä—ã—Ç–æ–º –∫–æ–Ω—Ç—É—Ä–µ –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ. –†–∞–∑–¥–µ–ª –æ—Å—Ç–∞–≤–ª–µ–Ω –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏, –Ω–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

### 1.1 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** ‚ö™ –ù–µ–∞–∫—Ç—É–∞–ª—å–Ω–æ (–∑–∞–∫—Ä—ã—Ç—ã–π –∫–æ–Ω—Ç—É—Ä)  
**–§–∞–π–ª—ã:** `server/server.go`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í—Å–µ API endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –í –∑–∞–∫—Ä—ã—Ç–æ–º –∫–æ–Ω—Ç—É—Ä–µ —ç—Ç–æ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π

**–°—Ç–∞—Ç—É—Å:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞

---

### 1.2 CORS —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–ª—è –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** ‚ö™ –ù–µ–∞–∫—Ç—É–∞–ª—å–Ω–æ (–∑–∞–∫—Ä—ã—Ç—ã–π –∫–æ–Ω—Ç—É—Ä)  
**–§–∞–π–ª—ã:** `server/server.go:546-559`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```go
func corsMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        w.Header().Set("Access-Control-Allow-Origin", "*")  // OK –¥–ª—è –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞
        // ...
    })
}
```

**–°—Ç–∞—Ç—É—Å:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞

---

### 1.3 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** ‚ö™ –ù–µ–∞–∫—Ç—É–∞–ª—å–Ω–æ (–∑–∞–∫—Ä—ã—Ç—ã–π –∫–æ–Ω—Ç—É—Ä)  
**–§–∞–π–ª—ã:** `server/server.go`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç DDoS –∞—Ç–∞–∫
- –í –∑–∞–∫—Ä—ã—Ç–æ–º –∫–æ–Ω—Ç—É—Ä–µ —Ä–∏—Å–∫ –º–∏–Ω–∏–º–∞–ª–µ–Ω

**–°—Ç–∞—Ç—É—Å:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞

---

### 1.4 –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –í–∞–∂–Ω–∞—è (–¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã, –Ω–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)  
**–§–∞–π–ª—ã:** `server/server.go`, `database/db.go`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ UUID —Ñ–æ—Ä–º–∞—Ç–∞ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ø–æ–ª–µ–π
- SQL –∏–Ω—ä–µ–∫—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã prepared statements, –Ω–æ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å–ª–∞–±–∞—è

**–ü—Ä–∏–º–µ—Ä:**
```go
// server/server.go:3520
clientID, err := strconv.Atoi(parts[0])
if err != nil {
    http.Error(w, "Invalid client ID", http.StatusBadRequest)
    return
}
// –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞, —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ —á–∏—Å–ª–∞ –∏ —Ç.–¥.
```

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `github.com/go-playground/validator`)
- –î–æ–±–∞–≤–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –¥–ª–∏–Ω—ã –¥–ª—è —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ø–æ–ª–µ–π

---

### 1.5 API –∫–ª—é—á–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –í–∞–∂–Ω–∞—è (–¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã, –Ω–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)  
**–§–∞–π–ª—ã:** `normalization/normalizer.go:58`, `server/server.go:1984`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```go
apiKey := os.Getenv("ARLIAI_API_KEY")
if apiKey == "" {
    // –ü—Ä–æ—Å—Ç–æ –æ—Ç–∫–ª—é—á–∞–µ–º AI, –Ω–æ –Ω–µ –ª–æ–≥–∏—Ä—É–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–æ–ª–∂–Ω—ã–º –æ–±—Ä–∞–∑–æ–º
}
```

**–†–µ—à–µ–Ω–∏–µ:**
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç API –∫–ª—é—á–µ–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –∫–ª—é—á–∞—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

## 2. –ê–†–•–ò–¢–ï–ö–¢–£–†–ê üü°

### 2.1 –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Ñ–∞–π–ª server.go (3500+ —Å—Ç—Ä–æ–∫)
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –í–∞–∂–Ω–∞—è  
**–§–∞–π–ª—ã:** `server/server.go`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –û–¥–∏–Ω —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –ª–æ–≥–∏–∫—É —Å–µ—Ä–≤–µ—Ä–∞
- –ù–∞—Ä—É—à–µ–Ω–∏–µ Single Responsibility Principle
- –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

**–†–µ—à–µ–Ω–∏–µ:**
- –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –ø–∞–∫–µ—Ç—ã:
  - `server/handlers/` - HTTP handlers
  - `server/services/` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
  - `server/middleware/` - middleware —Ñ—É–Ω–∫—Ü–∏–∏
  - `server/routes/` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤

---

### 2.2 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞ —Å–ª–æ–∏
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –í–∞–∂–Ω–∞—è  
**–§–∞–π–ª—ã:** `server/server.go`, `database/db.go`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Handlers –Ω–∞–ø—Ä—è–º—É—é —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ë–î
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–º–µ—à–∞–Ω–∞ —Å HTTP –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
- –ù–µ—Ç —Å–ª–æ—è —Å–µ—Ä–≤–∏—Å–æ–≤

**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
Handler ‚Üí Database (–Ω–∞–ø—Ä—è–º—É—é)
```

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
Handler ‚Üí Service ‚Üí Repository ‚Üí Database
```

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞—Ç—å —Å–ª–æ–π —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –í—ã–Ω–µ—Å—Ç–∏ —Ä–∞–±–æ—Ç—É —Å –ë–î –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- Handlers —Ç–æ–ª—å–∫–æ –¥–ª—è HTTP –æ–±—Ä–∞–±–æ—Ç–∫–∏

---

### 2.3 –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–∞—è  
**–§–∞–π–ª—ã:** `server/server.go`, `database/db.go`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ü–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü–æ—Ö–æ–∂–∏–µ handlers –¥–ª—è —Ä–∞–∑–Ω—ã—Ö endpoints

**–ü—Ä–∏–º–µ—Ä:**
```go
// –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ—Å—Ç —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π –º–µ—Ç–æ–¥–∞
if r.Method != http.MethodPost {
    http.Error(w, "Method not allowed", http.StatusMethodNotAllowed)
    return
}
```

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞—Ç—å helper —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å middleware –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –º–µ—Ç–æ–¥–æ–≤
- –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â—É—é –ª–æ–≥–∏–∫—É –≤ —É—Ç–∏–ª–∏—Ç—ã

---

### 2.4 –ñ–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—É—Ç–∏ –∫ –ë–î
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –í–∞–∂–Ω–∞—è  
**–§–∞–π–ª—ã:** `main.go:20-47`, `server/server.go:1993`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```go
// main.go:20
dbPath := "data.db"
if _, err := os.Stat("1c_data.db"); err == nil {
    dbPath = "1c_data.db"
}

// server/server.go:1993
config.DatabasePath = "./normalized_data.db"  // –ñ–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É Config –¥–ª—è –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

---

### 2.5 –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ race conditions
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –í–∞–∂–Ω–∞—è  
**–§–∞–π–ª—ã:** `server/server.go:2637-2702`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```go
// handleDatabaseSwitch
s.dbMutex.Lock()
defer s.dbMutex.Unlock()

// –ó–∞–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –ë–î
if err := s.db.Close(); err != nil {
    // ...
}

// –û—Ç–∫—Ä—ã–≤–∞–µ–º –Ω–æ–≤—É—é –ë–î
newDB, err := database.NewDB(request.Path)
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ú–µ–∂–¥—É –∑–∞–∫—Ä—ã—Ç–∏–µ–º –∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –ë–î –º–æ–≥—É—Ç –±—ã—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –ù–µ—Ç graceful shutdown –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ñ–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å context –¥–ª—è –æ—Ç–º–µ–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–π

---

### 2.6 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ dependency injection
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–∞—è  
**–§–∞–π–ª—ã:** `server/server.go`, `main.go`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä
- –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –°–ª–æ–∂–Ω–æ –∑–∞–º–µ–Ω—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## 3. –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö üü°

### 3.1 –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –í–∞–∂–Ω–∞—è  
**–§–∞–π–ª—ã:** `server/server.go`, `database/db.go`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –†–∞–∑–Ω—ã–µ —Å—Ç–∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—à–∏–±–∫–∏ —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –Ω–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è
- –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

**–ü—Ä–∏–º–µ—Ä—ã:**
```go
// server/server.go:567
if err := json.NewEncoder(w).Encode(data); err != nil {
    log.Printf("Error encoding JSON response: %v", err)  // –¢–æ–ª—å–∫–æ –ª–æ–≥, –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç—É
}

// database/db.go:94
if err != nil {
    return nil, fmt.Errorf("failed to create upload: %w", err)  // –ü—Ä–∞–≤–∏–ª—å–Ω–æ
}
```

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π error handler
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫
- –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—à–∏–±–∫–∏ –∫–ª–∏–µ–Ω—Ç—É –≤ –ø–æ–Ω—è—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

---

### 3.2 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ –æ—à–∏–±–∫–∞—Ö
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–∞—è  
**–§–∞–π–ª—ã:** `database/db.go`, `server/server.go`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –û—à–∏–±–∫–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ù–µ—Ç —Ç—Ä–µ–π—Å–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `fmt.Errorf` —Å `%w` –¥–ª—è wrapping
- –î–æ–±–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å structured logging

---

### 3.3 –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –í–∞–∂–Ω–∞—è  
**–§–∞–π–ª—ã:** `server/server.go:179`, `database/schema.go:112`

**–ü—Ä–æ–±–ª–µ–º—ã:**
```go
// server/server.go:179
xmlData, _ := xml.MarshalIndent(response, "", "  ")  // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –æ—à–∏–±–∫–∞

// database/schema.go:112
_, err := db.Exec(migration)
if err != nil {
    errStr := strings.ToLower(err.Error())
    // –ò–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—à–∏–±–∫–∏ –±–µ–∑ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
}
```

**–†–µ—à–µ–Ω–∏–µ:**
- –í—Å–µ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ –æ—à–∏–±–∫–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `_ =` —è–≤–Ω–æ, –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–µ –≤–∞–∂–Ω–∞

---

## 4. –ë–ê–ó–ê –î–ê–ù–ù–´–• üü°

### 4.1 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ connection pooling
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –í–∞–∂–Ω–∞—è  
**–§–∞–π–ª—ã:** `database/db.go:65-79`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```go
conn, err := sql.Open("sqlite3", dbPath)
// –ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SetMaxOpenConns, SetMaxIdleConns, SetConnMaxLifetime
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å connection pool –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

---

### 4.2 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –í–∞–∂–Ω–∞—è  
**–§–∞–π–ª—ã:** `database/db.go:171-189`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```go
// AddConstant - –¥–≤–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–µ–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
_, err := db.conn.Exec(query, uploadID, name, synonym, constType, value)
// ...
_, err = db.conn.Exec("UPDATE uploads SET total_constants = total_constants + 1 WHERE id = ?", uploadID)
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å—á–µ—Ç—á–∏–∫–æ–≤

---

### 4.3 –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –≤ –∫–æ–¥–µ
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–∞—è  
**–§–∞–π–ª—ã:** `database/db.go:568-608`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```go
// CleanOldCatalogItems
if totalCount <= 15973 {  // –û—Ç–∫—É–¥–∞ —ç—Ç–æ —á–∏—Å–ª–æ?
    return nil
}
// ...
LIMIT 15973  // –ú–∞–≥–∏—á–µ—Å–∫–æ–µ —á–∏—Å–ª–æ
```

**–†–µ—à–µ–Ω–∏–µ:**
- –í—ã–Ω–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º

---

### 4.4 –ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–∞—è  
**–§–∞–π–ª—ã:** `database/schema.go`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ ALTER TABLE —Å –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—à–∏–±–æ–∫
- –ù–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–µ—Ä—Å–∏–π —Å—Ö–µ–º—ã
- –°–ª–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –º–∏–≥—Ä–∞—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `golang-migrate/migrate`)
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
- –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤–µ—Ä—Å–∏–π —Å—Ö–µ–º—ã

---

## 5. –ö–ê–ß–ï–°–¢–í–û –ö–û–î–ê üü¢

### 5.1 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ unit —Ç–µ—Å—Ç–æ–≤
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –í–∞–∂–Ω–∞—è  
**–§–∞–π–ª—ã:** –í—Å–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ª–æ–≥–∏–∫–∏
- –°–ª–æ–∂–Ω–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –±–µ–∑ —Å—Ç—Ä–∞—Ö–∞ —Å–ª–æ–º–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ:**
- –ù–∞–ø–∏—Å–∞—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –î–æ–±–∞–≤–∏—Ç—å integration —Ç–µ—Å—Ç—ã –¥–ª—è API
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ç–µ—Å—Ç–∞–º–∏

---

### 5.2 –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–∞—è  
**–§–∞–π–ª—ã:** –í—Å–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ú–Ω–æ–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –ù–µ—Ç –ø—Ä–∏–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å godoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –°–æ–∑–¥–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

---

### 5.3 –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–∞—è  
**–§–∞–π–ª—ã:** `database/db.go`, `database/service_db.go`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–æ—Ö–æ–∂–∏–µ –º–µ—Ç–æ–¥—ã –≤ DB –∏ ServiceDB
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î

**–†–µ—à–µ–Ω–∏–µ:**
- –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â—É—é –ª–æ–≥–∏–∫—É –≤ –±–∞–∑–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–∑–∏—Ü–∏—é –≤–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

---

## 6. –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ üü¢

### 6.1 –ù–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–∞—è  
**–§–∞–π–ª—ã:** `database/db.go:627-655`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```go
// GetAllCatalogItems - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –≤ –ø–∞–º—è—Ç—å
func (db *DB) GetAllCatalogItems() ([]*CatalogItem, error) {
    // –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–∏–ª–ª–∏–æ–Ω—ã –∑–∞–ø–∏—Å–µ–π
}
```

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –≤–µ–∑–¥–µ, –≥–¥–µ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å streaming –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏

---

### 6.2 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–∞—è  
**–§–∞–π–ª—ã:** `database/schema.go`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ –≤—Å–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è –∏–º–µ—é—Ç –∏–Ω–¥–µ–∫—Å—ã
- –ù–µ—Ç —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å EXPLAIN QUERY PLAN –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## 7. –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø üü°

### 7.1 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –í–∞–∂–Ω–∞—è  
**–§–∞–π–ª—ã:** `main.go`, `server/server.go`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã –ø–æ –∫–æ–¥—É
- –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –°–ª–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É Config
- –ó–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑ —Ñ–∞–π–ª–∞ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

### 7.2 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ graceful shutdown
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –í–∞–∂–Ω–∞—è  
**–§–∞–π–ª—ã:** `main.go:88-97`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```go
go func() {
    <-c
    log.Println("–ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è...")
    window.SetStatus("–°–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è...")
    os.Exit(0)  // –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –≤—ã—Ö–æ–¥, –Ω–µ—Ç graceful shutdown
}()
```

**–†–µ—à–µ–Ω–∏–µ:**
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å graceful shutdown
- –ó–∞–≤–µ—Ä—à–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ó–∞–∫—Ä—ã–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≥–æ—Ä—É—Ç–∏–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## 8. –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –õ–û–ì–ò–†–û–í–ê–ù–ò–ï üü¢

### 8.1 –ë–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–∞—è  
**–§–∞–π–ª—ã:** `server/server.go:142-150`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `log` –ø–∞–∫–µ—Ç
- –ù–µ—Ç structured logging
- –ù–µ—Ç —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ—Ç —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å structured logging (–Ω–∞–ø—Ä–∏–º–µ—Ä, `zap` –∏–ª–∏ `logrus`)
- –î–æ–±–∞–≤–∏—Ç—å —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (Prometheus)

---

## –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–§–∞–∑–∞ 1) –ø—Ä–æ–ø—É—â–µ–Ω—ã, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∑–∞–∫—Ä—ã—Ç–æ–º –∫–æ–Ω—Ç—É—Ä–µ.

### –§–∞–∑–∞ 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (2-3 –Ω–µ–¥–µ–ª–∏)

1. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ server.go**
   - [ ] –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –ø–∞–∫–µ—Ç—ã (handlers, services, middleware)
   - [ ] –í—ã–Ω–µ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –≤ —Å–µ—Ä–≤–∏—Å—ã
   - [ ] –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
   - [ ] –°–æ–∑–¥–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - [ ] –í—ã–Ω–µ—Å—Ç–∏ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∫–æ–Ω—Ñ–∏–≥
   - [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

3. **Dependency injection**
   - [ ] –í–Ω–µ–¥—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –§–∞–∑–∞ 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –∫–∞—á–µ—Å—Ç–≤–æ (1-2 –Ω–µ–¥–µ–ª–∏)

4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - [ ] –°–æ–∑–¥–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π error handler
   - [ ] –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
   - [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–æ –≤—Å–µ –æ—à–∏–±–∫–∏

5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ª–æ–≥–∏–∫–∏
   - [ ] –î–æ–±–∞–≤–∏—Ç—å integration —Ç–µ—Å—Ç—ã –¥–ª—è API
   - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD

6. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - [ ] –î–æ–±–∞–≤–∏—Ç—å godoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
   - [ ] –û–±–Ω–æ–≤–∏—Ç—å API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
   - [ ] –°–æ–∑–¥–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –§–∞–∑–∞ 3: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (1 –Ω–µ–¥–µ–ª—è)

7. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î**
    - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å connection pooling
    - [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
    - [ ] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã
    - [ ] –í–Ω–µ–¥—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –º–∏–≥—Ä–∞—Ü–∏–π

8. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
    - [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –≤–µ–∑–¥–µ
    - [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã
    - [ ] –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ

### –§–∞–∑–∞ 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (1 –Ω–µ–¥–µ–ª—è)

9. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
    - [ ] –í–Ω–µ–¥—Ä–∏—Ç—å structured logging
    - [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (Prometheus)
    - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã

10. **Graceful shutdown**
    - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
    - [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π

11. **–§–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ä–æ–≤–∫–∞**
    - [ ] –£–±—Ä–∞—Ç—å –º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞
    - [ ] –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
    - [ ] Code review –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## –ü–†–ò–û–†–ò–¢–ï–¢–´

**–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–∫—Ä–∏—Ç–∏—á–Ω–æ):**
1. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ server.go)
2. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
3. Graceful shutdown

**–í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è (–≤–∞–∂–Ω–æ):**
4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
6. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, connection pooling)

**–ü–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ):**
7. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
8. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
9. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏
10. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

---

## –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ü—Ä–æ–µ–∫—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏–π –≤ –æ–±–ª–∞—Å—Ç–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞. –£—á–∏—Ç—ã–≤–∞—è, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∑–∞–∫—Ä—ã—Ç–æ–º –∫–æ–Ω—Ç—É—Ä–µ, –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º–∏. –û—Å–Ω–æ–≤–Ω–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç —É–¥–µ–ª–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º —É–ª—É—á—à–µ–Ω–∏—è–º, –∫–æ—Ç–æ—Ä—ã–µ —É–ø—Ä–æ—Å—Ç—è—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞.

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** 7/10
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: 8/10
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: N/A (–∑–∞–∫—Ä—ã—Ç—ã–π –∫–æ–Ω—Ç—É—Ä)
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: 5/10 (—Ç—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è)
- –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞: 6/10
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 7/10

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –†–∞–∑–¥–µ–ª–∏—Ç—å –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π `server.go` –Ω–∞ –º–æ–¥—É–ª–∏
2. –í–Ω–µ–¥—Ä–∏—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (handler/service/repository)
3. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
4. –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
5. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ª–æ–≥–∏–∫–∏

