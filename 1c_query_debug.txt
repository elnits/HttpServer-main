============================================
ЗАПРОС 1: Индивидуальные характеристики (ОГРАНИЧЕННЫЙ)
============================================
Номенклатуры с характеристиками, где Владелец = Номенклатура.Ссылка
ВНИМАНИЕ: Ограничение ПЕРВЫЕ 1000 для безопасности!

ВЫБРАТЬ ПЕРВЫЕ 1000
	Номенклатура.Ссылка КАК Номенклатура,
	Номенклатура.Код КАК Код,
	Номенклатура.Наименование КАК Наименование,
	ХарактеристикиНоменклатуры.Ссылка КАК Характеристика,
	ХарактеристикиНоменклатуры.НаименованиеПолное КАК НаименованиеХарактеристики
ИЗ
	Справочник.Номенклатура КАК Номенклатура
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО ХарактеристикиНоменклатуры.Владелец = Номенклатура.Ссылка
			И ХарактеристикиНоменклатуры.Владелец ССЫЛКА Справочник.Номенклатура
ГДЕ
	НЕ Номенклатура.ПометкаУдаления
	И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления

УПОРЯДОЧИТЬ ПО
	Наименование,
	НаименованиеХарактеристики


============================================
ЗАПРОС 2: Общие для вида характеристики (ОГРАНИЧЕННЫЙ)
============================================
Номенклатуры с характеристиками, где Владелец = ВидНоменклатуры
ВНИМАНИЕ: Ограничение ПЕРВЫЕ 1000 для безопасности!

ВЫБРАТЬ ПЕРВЫЕ 1000
	Номенклатура.Ссылка КАК Номенклатура,
	Номенклатура.Код КАК Код,
	Номенклатура.Наименование КАК Наименование,
	Номенклатура.ВидНоменклатуры КАК ВидНоменклатуры,
	ХарактеристикиНоменклатуры.Ссылка КАК Характеристика,
	ХарактеристикиНоменклатуры.НаименованиеПолное КАК НаименованиеХарактеристики
ИЗ
	Справочник.Номенклатура КАК Номенклатура
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО Номенклатура.ВидНоменклатуры = ХарактеристикиНоменклатуры.Владелец
			И ХарактеристикиНоменклатуры.Владелец ССЫЛКА Справочник.ВидыНоменклатуры
ГДЕ
	НЕ Номенклатура.ПометкаУдаления
	И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления

УПОРЯДОЧИТЬ ПО
	Наименование,
	НаименованиеХарактеристики


============================================
ЗАПРОС 3: Проверка конкретной номенклатуры
============================================
Проверяем номенклатуру "Подвеска (Marel)" с кодом "ПФ-00000877"

ВЫБРАТЬ
	Номенклатура.Ссылка КАК Номенклатура,
	Номенклатура.Код КАК Код,
	Номенклатура.Наименование КАК Наименование,
	Номенклатура.ВидНоменклатуры КАК ВидНоменклатуры,
	ХарактеристикиНоменклатуры.Ссылка КАК Характеристика,
	ХарактеристикиНоменклатуры.НаименованиеПолное КАК НаименованиеХарактеристики
ИЗ
	Справочник.Номенклатура КАК Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО Номенклатура.ВидНоменклатуры = ХарактеристикиНоменклатуры.Владелец
			И ХарактеристикиНоменклатуры.Владелец ССЫЛКА Справочник.ВидыНоменклатуры
			И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления
ГДЕ
	Номенклатура.Код = "ПФ-00000877"
	И НЕ Номенклатура.ПометкаУдаления

УПОРЯДОЧИТЬ ПО
	НаименованиеХарактеристики


============================================
ЗАПРОС 4: Подсчет характеристик для конкретной номенклатуры
============================================
Сколько характеристик у номенклатуры "ПФ-00000877"

ВЫБРАТЬ
	Номенклатура.Ссылка КАК Номенклатура,
	Номенклатура.Код КАК Код,
	Номенклатура.Наименование КАК Наименование,
	Номенклатура.ВидНоменклатуры КАК ВидНоменклатуры,
	КОЛИЧЕСТВО(ХарактеристикиНоменклатуры.Ссылка) КАК КоличествоХарактеристик
ИЗ
	Справочник.Номенклатура КАК Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО Номенклатура.ВидНоменклатуры = ХарактеристикиНоменклатуры.Владелец
			И ХарактеристикиНоменклатуры.Владелец ССЫЛКА Справочник.ВидыНоменклатуры
			И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления
ГДЕ
	Номенклатура.Код = "ПФ-00000877"
	И НЕ Номенклатура.ПометкаУдаления

СГРУППИРОВАТЬ ПО
	Номенклатура.Ссылка,
	Номенклатура.Код,
	Номенклатура.Наименование,
	Номенклатура.ВидНоменклатуры


============================================
ЗАПРОС 5: Все характеристики для вида номенклатуры
============================================
Проверяем, какие характеристики есть у вида "Запчасти для Marel"

ВЫБРАТЬ
	ХарактеристикиНоменклатуры.Ссылка КАК Характеристика,
	ХарактеристикиНоменклатуры.НаименованиеПолное КАК НаименованиеХарактеристики,
	ХарактеристикиНоменклатуры.Владелец КАК Владелец
ИЗ
	Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
ГДЕ
	ХарактеристикиНоменклатуры.Владелец ССЫЛКА Справочник.ВидыНоменклатуры
	И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления
	И ВЫРАЗИТЬ(ХарактеристикиНоменклатуры.Владелец КАК Справочник.ВидыНоменклатуры).Наименование = "Запчасти для Marel"

УПОРЯДОЧИТЬ ПО
	НаименованиеХарактеристики


============================================
ЗАПРОС 6: ОГРАНИЧЕННЫЙ - Индивидуальные (первые 100)
============================================
Безопасный вариант с ограничением

ВЫБРАТЬ ПЕРВЫЕ 100
	Номенклатура.Ссылка КАК Номенклатура,
	Номенклатура.Код КАК Код,
	Номенклатура.Наименование КАК Наименование,
	ХарактеристикиНоменклатуры.Ссылка КАК Характеристика,
	ХарактеристикиНоменклатуры.НаименованиеПолное КАК НаименованиеХарактеристики
ИЗ
	Справочник.Номенклатура КАК Номенклатура
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО ХарактеристикиНоменклатуры.Владелец = Номенклатура.Ссылка
			И ХарактеристикиНоменклатуры.Владелец ССЫЛКА Справочник.Номенклатура
ГДЕ
	НЕ Номенклатура.ПометкаУдаления
	И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления

УПОРЯДОЧИТЬ ПО
	Наименование,
	НаименованиеХарактеристики


============================================
ЗАПРОС 7: ОГРАНИЧЕННЫЙ - Общие для вида (первые 100)
============================================
Безопасный вариант с ограничением

ВЫБРАТЬ ПЕРВЫЕ 100
	Номенклатура.Ссылка КАК Номенклатура,
	Номенклатура.Код КАК Код,
	Номенклатура.Наименование КАК Наименование,
	Номенклатура.ВидНоменклатуры КАК ВидНоменклатуры,
	ХарактеристикиНоменклатуры.Ссылка КАК Характеристика,
	ХарактеристикиНоменклатуры.НаименованиеПолное КАК НаименованиеХарактеристики
ИЗ
	Справочник.Номенклатура КАК Номенклатура
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО Номенклатура.ВидНоменклатуры = ХарактеристикиНоменклатуры.Владелец
			И ХарактеристикиНоменклатуры.Владелец ССЫЛКА Справочник.ВидыНоменклатуры
ГДЕ
	НЕ Номенклатура.ПометкаУдаления
	И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления

УПОРЯДОЧИТЬ ПО
	Наименование,
	НаименованиеХарактеристики


============================================
ЗАПРОС 8: Подсчет общий (безопасный)
============================================
Подсчитываем количество без вывода всех данных

ВЫБРАТЬ
	КОЛИЧЕСТВО(*) КАК ВсегоИндивидуальных
ИЗ
	Справочник.Номенклатура КАК Номенклатура
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО ХарактеристикиНоменклатуры.Владелец = Номенклатура.Ссылка
			И ХарактеристикиНоменклатуры.Владелец ССЫЛКА Справочник.Номенклатура
ГДЕ
	НЕ Номенклатура.ПометкаУдаления
	И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления


============================================
ЗАПРОС 9: Подсчет общих для вида (безопасный)
============================================
Подсчитываем количество без вывода всех данных

ВЫБРАТЬ
	КОЛИЧЕСТВО(*) КАК ВсегоОбщихДляВида
ИЗ
	Справочник.Номенклатура КАК Номенклатура
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО Номенклатура.ВидНоменклатуры = ХарактеристикиНоменклатуры.Владелец
			И ХарактеристикиНоменклатуры.Владелец ССЫЛКА Справочник.ВидыНоменклатуры
ГДЕ
	НЕ Номенклатура.ПометкаУдаления
	И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления


============================================
ЗАПРОС 10: Объединенный запрос БЕЗ пустых ссылок
============================================
Исправленный запрос с исключением записей, где Номенклатура.Ссылка = <>

ВЫБРАТЬ

	Номенклатура.Ссылка КАК Номенклатура,

	Номенклатура.Код КАК Код,

	Номенклатура.Наименование КАК Наименование,

	ХарактеристикиНоменклатуры.Ссылка КАК Характеристика,

	ХарактеристикиНоменклатуры.НаименованиеПолное КАК НаименованиеХарактеристики

ИЗ

	Справочник.Номенклатура КАК Номенклатура

		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры

		ПО ХарактеристикиНоменклатуры.Владелец = Номенклатура.Ссылка

			И ХарактеристикиНоменклатуры.Владелец ССЫЛКА Справочник.Номенклатура

ГДЕ

	НЕ Номенклатура.ПометкаУдаления

	И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления

	И НЕ Номенклатура.Ссылка = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)

	И НЕ Номенклатура.Наименование = "<>"

	И НЕ ПОДОБНО(СТРОКА(Номенклатура.Код), "%/%")

	И НЕ ПОДОБНО(СТРОКА(Номенклатура.Код), "%.%")

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ

	Номенклатура.Ссылка КАК Номенклатура,

	Номенклатура.Код КАК Код,

	Номенклатура.Наименование КАК Наименование,

	ХарактеристикиНоменклатуры.Ссылка КАК Характеристика,

	ХарактеристикиНоменклатуры.НаименованиеПолное КАК НаименованиеХарактеристики

ИЗ

	Справочник.Номенклатура КАК Номенклатура

		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры

		ПО Номенклатура.ВидНоменклатуры = ХарактеристикиНоменклатуры.Владелец

			И ХарактеристикиНоменклатуры.Владелец ССЫЛКА Справочник.ВидыНоменклатуры

ГДЕ

	НЕ Номенклатура.ПометкаУдаления

	И НЕ ХарактеристикиНоменклатуры.ПометкаУдаления

	И НЕ Номенклатура.Ссылка = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)

	И НЕ Номенклатура.Наименование = "<>"

	И НЕ ПОДОБНО(СТРОКА(Номенклатура.Код), "%/%")

	И НЕ ПОДОБНО(СТРОКА(Номенклатура.Код), "%.%")

УПОРЯДОЧИТЬ ПО

	Наименование,

	НаименованиеХарактеристики

