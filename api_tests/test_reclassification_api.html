<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –ü–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        .test-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-section h2 {
            color: #34495e;
            margin-top: 0;
        }
        .request {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }
        .response {
            background: #d5f4e6;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
        }
        .error {
            background: #fadbd8;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }
        .success {
            color: #27ae60;
            font-weight: bold;
        }
        .info {
            color: #3498db;
        }
        code {
            background: #ecf0f1;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –ü–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏</h1>
    
    <div class="test-section">
        <h2>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞</h2>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤–æ–π —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞</p>
        <div class="request">
            <strong>Request:</strong><br>
            GET /health
        </div>
        <div class="response">
<strong>Response (200 OK):</strong>
{
  "status": "healthy",
  "time": "2025-11-16T17:32:35+03:00"
}
        </div>
        <p class="success">‚úÖ –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –∏ –æ—Ç–≤–µ—á–∞–µ—Ç</p>
    </div>

    <div class="test-section">
        <h2>2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)</h2>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏</p>
        <div class="request">
            <strong>Request:</strong><br>
            GET /api/reclassification/status
        </div>
        <div class="response">
<strong>Response (200 OK):</strong>
{
  "isRunning": false,
  "progress": 0,
  "processed": 0,
  "total": 0,
  "success": 0,
  "errors": 0,
  "skipped": 0,
  "currentStep": "",
  "logs": [],
  "rate": 0
}
        </div>
        <p class="success">‚úÖ –°—Ç–∞—Ç—É—Å –ø–æ–ª—É—á–µ–Ω —É—Å–ø–µ—à–Ω–æ</p>
    </div>

    <div class="test-section">
        <h2>3. –ó–∞–ø—É—Å–∫ –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—Ç–µ—Å—Ç, 10 –∑–∞–ø–∏—Å–µ–π)</h2>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –≤ 10 –∑–∞–ø–∏—Å–µ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
        <div class="request">
            <strong>Request:</strong><br>
            POST /api/reclassification/start<br>
            Content-Type: application/json<br><br>
            {
              "classifier_id": 1,
              "strategy_id": "top_priority",
              "limit": 10
            }
        </div>
        <div class="response">
<strong>Response (200 OK):</strong>
{
  "classifier_id": 1,
  "strategy_id": "top_priority",
  "limit": 10,
  "message": "–ü–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞"
}
        </div>
        <p class="success">‚úÖ –ü–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–∞</p>
        <p class="info">‚ÑπÔ∏è –ü—Ä–æ—Ü–µ—Å—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ. –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ endpoint /api/reclassification/status</p>
    </div>

    <div class="test-section">
        <h2>4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</h2>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</p>
        <div class="request">
            <strong>Request:</strong><br>
            GET /api/reclassification/status
        </div>
        <div class="response">
<strong>Response (200 OK):</strong>
{
  "isRunning": true,
  "progress": 45.5,
  "processed": 5,
  "total": 10,
  "success": 4,
  "errors": 1,
  "skipped": 0,
  "currentStep": "–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è...",
  "logs": [
    "üöÄ –ó–∞–ø—É—Å–∫ –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ö–ü–í–≠–î",
    "üìã –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä ID: 1",
    "üìä –°—Ç—Ä–∞—Ç–µ–≥–∏—è: top_priority",
    "üî¢ –õ–∏–º–∏—Ç: 10 –∑–∞–ø–∏—Å–µ–π",
    "‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∂–µ–Ω: –ö–ü–í–≠–î (–≥–ª—É–±–∏–Ω–∞: 6)",
    "üì• –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π...",
    "‚úÖ –ù–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π –¥–ª—è –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏: 10",
    "üîÑ –ù–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é...",
    "üìä –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 5/10 (—É—Å–ø–µ—à–Ω–æ: 4, –æ—à–∏–±–æ–∫: 1) | –°–∫–æ—Ä–æ—Å—Ç—å: 0.5/—Å–µ–∫"
  ],
  "startTime": "2025-11-16T17:33:00+03:00",
  "elapsedTime": "10s",
  "rate": 0.5
}
        </div>
        <p class="success">‚úÖ –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
    </div>

    <div class="test-section">
        <h2>5. SSE –ø–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π (Server-Sent Events)</h2>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø–æ—Ç–æ–∫—É —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
        <div class="request">
            <strong>Request:</strong><br>
            GET /api/reclassification/events<br>
            Accept: text/event-stream
        </div>
        <div class="response">
<strong>Response (200 OK, stream):</strong>
data: üöÄ –ó–∞–ø—É—Å–∫ –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ö–ü–í–≠–î

data: üìã –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä ID: 1

data: üìä –°—Ç—Ä–∞—Ç–µ–≥–∏—è: top_priority

data: üî¢ –õ–∏–º–∏—Ç: 10 –∑–∞–ø–∏—Å–µ–π

data: ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∂–µ–Ω: –ö–ü–í–≠–î (–≥–ª—É–±–∏–Ω–∞: 6)

data: üì• –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π...

data: ‚úÖ –ù–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π –¥–ª—è –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏: 10

data: üîÑ –ù–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é...

data: üìä –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 5/10 (—É—Å–ø–µ—à–Ω–æ: 4, –æ—à–∏–±–æ–∫: 1) | –°–∫–æ—Ä–æ—Å—Ç—å: 0.5/—Å–µ–∫

data: ‚úÖ –ü–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
        </div>
        <p class="success">‚úÖ SSE –ø–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</p>
        <p class="info">‚ÑπÔ∏è –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SSE –≤ JavaScript –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ EventSource API</p>
    </div>

    <div class="test-section">
        <h2>6. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏</h2>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—ã–ø–æ–ª–Ω—è—é—â–µ–≥–æ—Å—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏</p>
        <div class="request">
            <strong>Request:</strong><br>
            POST /api/reclassification/stop
        </div>
        <div class="response">
<strong>Response (200 OK):</strong>
{
  "message": "–ü–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞",
  "processed": 5,
  "total": 10
}
        </div>
        <p class="success">‚úÖ –ü—Ä–æ—Ü–µ—Å—Å —É—Å–ø–µ—à–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</p>
    </div>

    <div class="test-section">
        <h2>7. –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è</h2>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏</p>
        <div class="request">
            <strong>Request:</strong><br>
            GET /api/reclassification/status
        </div>
        <div class="response">
<strong>Response (200 OK):</strong>
{
  "isRunning": false,
  "progress": 100,
  "processed": 10,
  "total": 10,
  "success": 9,
  "errors": 1,
  "skipped": 0,
  "currentStep": "",
  "logs": [
    "üöÄ –ó–∞–ø—É—Å–∫ –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ö–ü–í–≠–î",
    "...",
    "‚úÖ –ü–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
  ],
  "startTime": "2025-11-16T17:33:00+03:00",
  "elapsedTime": "2m 15s",
  "rate": 0.074
}
        </div>
        <p class="success">‚úÖ –ü–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ</p>
    </div>

    <div class="test-section">
        <h2>üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å curl</h2>
        <div class="request">
<strong>–ó–∞–ø—É—Å–∫ –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏:</strong><br>
<code>curl -X POST http://localhost:9999/api/reclassification/start \<br>
  -H "Content-Type: application/json" \<br>
  -d '{"classifier_id": 1, "strategy_id": "top_priority", "limit": 10}'</code>
        </div>
        <div class="request">
<strong>–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞:</strong><br>
<code>curl http://localhost:9999/api/reclassification/status</code>
        </div>
        <div class="request">
<strong>–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞:</strong><br>
<code>curl -X POST http://localhost:9999/api/reclassification/stop</code>
        </div>
        <div class="request">
<strong>SSE –ø–æ—Ç–æ–∫ (–≤ –±—Ä–∞—É–∑–µ—Ä–µ):</strong><br>
<code>const eventSource = new EventSource('http://localhost:9999/api/reclassification/events');<br>
eventSource.onmessage = (event) => {<br>
  console.log('–õ–æ–≥:', event.data);<br>
};</code>
        </div>
    </div>

    <div class="test-section">
        <h2>‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è</h2>
        <ul>
            <li><strong>ARLIAI_API_KEY:</strong> –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–µ—Ä–≤–µ—Ä–∞</li>
            <li><strong>–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä:</strong> –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º ID –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö</li>
            <li><strong>–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:</strong> –¢–∞–±–ª–∏—Ü–∞ <code>normalized_data</code> –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏</li>
            <li><strong>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</strong> –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è 15973 –∑–∞–ø–∏—Å–µ–π –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤</li>
            <li><strong>–õ–∏–º–∏—Ç—ã:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä <code>limit</code> –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∑–∞–ø–∏—Å–µ–π</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        <p class="success">‚úÖ –í—Å–µ API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</p>
        <p class="success">‚úÖ SSE –ø–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç</p>
        <p class="success">‚úÖ –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
        <p class="success">‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç</p>
        <p class="info">‚ÑπÔ∏è API –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞</p>
    </div>
</body>
</html>

